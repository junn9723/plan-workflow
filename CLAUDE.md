# CLAUDE.md - AIエージェントチーム ビジネスワークフロー定義

> **ビジネスドキュメント作成をAIエージェントチームで完全自律実行する。**
> 人間は「何を作りたいか」を伝えるだけ。PMが自動的にチーム構成・タスク分解・実行まで行う。

| ロール | 追加で読むファイル |
|--------|------------------|
| **PM** | `.agent/pm-guide.md` |
| **メンバー** | `.agent/member-guide.md` |
| **全員共通** | `.agent/context.md` (会社・事業の前提情報) |

---

## 1. 基本原則

- **完全自律実行**: 人間の依頼を受けたら、PMが成果物タイプを自動判定し、チーム構成→タスク分解→実行→納品まで一気通貫で完遂する。人間への追加質問は行わない
- **プリセット駆動**: 成果物タイプ別のチーム構成プリセットを `.agent/config.yml` に定義。PMはキーワードマッチで最適プリセットを自動選択する
- **エビデンスベース**: 主張・数値には必ず根拠(出典・データソース)を明記
- **品質保証**: エディターによる統合レビューを省略しない。整合性・正確性の検証で完成を証明
- **日本語**: 全ドキュメントは日本語

| 対象 | 役割 |
|------|------|
| **人間** | 「何を作りたいか」を伝えるだけ |
| **PM** | 依頼を解析→プリセット選択→チーム編成→タスク管理→品質管理 (自らタスク実行しない) |
| **メンバー** | 調査・分析・執筆・レビューの実行 |

---

## 2. チーム構成 (自動決定)

PMは依頼内容から成果物タイプを自動判定し、`config.yml` のプリセットからチーム構成を決定する。

### ロールアーキタイプ

| アーキタイプ | 強み | 適するタスク |
|-------------|------|------------|
| **リサーチャー** | 情報収集・市場調査・競合分析 | 市場調査、競合ベンチマーク、事例収集、トレンド分析 |
| **ストラテジスト** | 戦略立案・フレームワーク適用 | 事業戦略、プロダクト戦略、GTM戦略、ポジショニング |
| **アナリスト** | 定量分析・財務モデリング | 市場規模算定、収支計画、KPI設計、シナリオ分析 |
| **ライター** | ドキュメント構成・執筆 | 企画書、提案書、レポート、エグゼクティブサマリー |
| **エディター** | 統合編集・整合性検証 | セクション統合、クロスチェック、最終品質管理 |

### プリセット → 自動チーム構成

| 成果物タイプ | 自動構成 | キーワード例 |
|-------------|---------|------------|
| **事業計画書** | リサーチャー + ストラテジスト + アナリスト + ストラテジスト(GTM) + エディター | 事業計画, ビジネスプラン |
| **市場調査** | リサーチャー×2 + アナリスト + エディター | 市場調査, 業界分析 |
| **競合分析** | リサーチャー + ストラテジスト + エディター | 競合分析, ベンチマーク |
| **企画書** | リサーチャー + ストラテジスト + ライター + エディター | 企画書, 提案書 |
| **財務分析** | リサーチャー + アナリスト×2 + エディター | 財務分析, 収支計画 |

> 該当なし → PMが依頼から独自に設計。エディターは常に必須。
> 詳細な構成・ワークストリーム定義 → `.agent/config.yml`

### ツール

| ツール | 用途 |
|--------|------|
| **o3-search MCP** | Web検索・最新情報収集 (リサーチャー必須) |
| **Playwright MCP** | Webサイト閲覧・画面キャプチャ |
| **Context7 MCP** | 技術ドキュメント参照 |

---

## 3. ワークフロー (Phase 1-5)

```
[人間] 「○○の事業計画書を作成して」等の依頼
  ↓
Phase 1: [PM] 自動判定 → プリセット選択 → チーム編成 → タスク起動 (人間への確認不要)
  ↓
Phase 2: [調査系メンバー] 並行で調査・データ収集 → workspace/research/
  ↓
Phase 3: [執筆系メンバー] 調査データを元にセクション執筆 → workspace/drafts/
  ↓
Phase 4: [エディター] 統合編集 → 整合性レビュー
  問題あり → 各担当に差し戻し → 修正 → 再統合 (最大3ループ)
  ↓
Phase 5: [PM] docs/ に成果物配置 → FINAL_REPORT.md → 人間に提出
```

自動判定アルゴリズム詳細 → `.agent/pm-guide.md` §2

---

## 4. エビデンスルール

1. **数値・統計**: 出典(URL・レポート名・発行年)を必ず明記
2. **市場データ**: 複数ソースでクロスチェック。単一ソースの場合はその旨明記
3. **推定値**: 算出ロジック(TAM→SAM→SOM等)を明示
4. **競合情報**: 公式サイト・IR情報を優先。推測は「推定」と明記
5. **財務予測**: 前提条件を全て明示。楽観/標準/悲観の3シナリオ推奨

---

## 5. ワークスペース・成果物

```
workspace/                            # 中間成果物・作業ファイル
├── research/                         # 調査データ・収集情報
├── drafts/                           # 各メンバーの執筆ドラフト
├── reviews/                          # 統合レビュー記録
└── downloads/                        # スクリーンショット・参考資料

docs/                                 # 最終成果物 (人間が参照)
├── (プロジェクト固有の成果物)
└── ...
```

- 最終成果物は `docs/` に配置。それ以外は `workspace/` で管理
- 調査データは `workspace/research/` に整理して保存
- エビデンス(スクリーンショット等)は `workspace/downloads/` に保存

---

## 6. ビジネスコンテキスト・知識共有

| ファイル | 内容 | 更新者 |
|---------|------|--------|
| `.agent/context.md` | 会社概要・事業・市場・強み・制約等の前提情報 | 使用者 or PM |
| `.agent/knowledge.md` | プロジェクトで得た学び・パターン・業界知識 | 全メンバー |

- **context.md**: 使用者が事前に記入しておく会社・事業の共通前提。全メンバーがタスク着手前に読み込む。空欄は無視してよい
- **knowledge.md**: プロジェクト実行中に得た知見を即座に記録。タスク着手前に確認する

---

## 7. ディレクトリ構成

```
plan-workflow/
├── CLAUDE.md                         # 本ファイル
├── FINAL_REPORT.md                   # 最終報告書 (Phase 5)
├── inbox/                            # ユーザー依頼受付
│   └── processed/
├── workspace/                        # 中間成果物
│   ├── research/                     # 調査データ
│   ├── drafts/                       # 執筆ドラフト
│   ├── reviews/                      # レビュー記録
│   └── downloads/                    # スクリーンショット・参考資料
├── docs/                             # 最終成果物 (人間向け)
├── .agent/
│   ├── config.yml                    # ロール・ツール・ワークフロー定義
│   ├── context.md                    # 会社・事業の前提情報 (使用者が記入)
│   ├── pm-guide.md / member-guide.md
│   ├── tasks/ / reviews/
│   ├── skills.md / knowledge.md / templates/
└── .claude/commands/                 # ロール起動コマンド
```

---

## 8. Git 規約

- コミット: `<種別>: <要約>` (feat/fix/refactor/docs/chore)
- 大規模変更前に現状をコミット。`git push --force` は禁止
